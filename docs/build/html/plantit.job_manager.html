

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>plantit.job_manager package &mdash; Plant IT Alpha documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="plantit.user package" href="plantit.user.html" />
    <link rel="prev" title="plantit.file_manager.filesystems package" href="plantit.file_manager.filesystems.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Plant IT
          

          
          </a>

          
            
            
              <div class="version">
                0.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">System Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Server Configuration</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="plantit.html">plantit package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plantit.html#module-plantit.celery">plantit.celery module</a></li>
<li class="toctree-l2"><a class="reference internal" href="plantit.html#module-plantit.settings">plantit.settings module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="plantit.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plantit.collection.html">plantit.collection package</a></li>
<li class="toctree-l3"><a class="reference internal" href="plantit.file_manager.html">plantit.file_manager package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">plantit.job_manager package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-plantit.job_manager.authentication">plantit.job_manager.authentication module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-plantit.job_manager.job">plantit.job_manager.job module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-plantit.job_manager.remote">plantit.job_manager.remote module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="plantit.user.html">plantit.user package</a></li>
<li class="toctree-l3"><a class="reference internal" href="plantit.workflows.html">plantit.workflows package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apis.html">apis package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Plant IT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="plantit.html">plantit package</a> &raquo;</li>
        
      <li>plantit.job_manager package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/plantit.job_manager.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-plantit.job_manager">
<span id="plantit-job-manager-package"></span><h1>plantit.job_manager package<a class="headerlink" href="#module-plantit.job_manager" title="Permalink to this headline">¶</a></h1>
<p>The job manager provides a system for running ordered tasks asynchronously
on the server side. Tasks are run on a <a class="reference external" href="http://www.celeryproject.org">celery task queue</a>.
This queue is run inside the celery docker container.</p>
<p>The job manager’s main purpose it to submit workflow runs to a cluster.
However, can be used for any collection of ordered task that need run
asynchronously with respect to the web server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The celery container must be restarted to load any code changes.</p>
</div>
<p>The major unit of the job manager is a <a class="reference internal" href="#plantit.job_manager.job.Job" title="plantit.job_manager.job.Job"><code class="xref py py-class docutils literal notranslate"><span class="pre">job.Job</span></code></a>. A job contains a
collection of ordered <a class="reference internal" href="#plantit.job_manager.job.Task" title="plantit.job_manager.job.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">job.Task</span></code></a> that are run when the job is
started. A job can be started by calling the static method
<a class="reference internal" href="#plantit.job_manager.job.Job.run_next" title="plantit.job_manager.job.Job.run_next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">job.Job.run_next()</span></code></a> passing the pk of the job to start.
<a class="reference internal" href="#plantit.job_manager.job.Job.run_next" title="plantit.job_manager.job.Job.run_next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_next()</span></code></a> will run the job’s tasks sequentially starting with
the task with the lowest <code class="xref py py-attr docutils literal notranslate"><span class="pre">job.Job.Task.order_pos</span></code>.
<a class="reference internal" href="#plantit.job_manager.job.Job.run_next" title="plantit.job_manager.job.Job.run_next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_next()</span></code></a> will not run the next task in a job if
the job’s <a class="reference internal" href="#plantit.job_manager.job.Job.current_status" title="plantit.job_manager.job.Job.current_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">current_status()</span></code></a> is <code class="xref py py-attr docutils literal notranslate"><span class="pre">job.Status.FAILED</span></code>.</p>
<p>See the code for <code class="xref py py-class docutils literal notranslate"><span class="pre">workflows.classes.Workflow</span></code> for an example of
how to add tasks to a job and start the job.</p>
<p>Workflow jobs are started by <code class="xref py py-class docutils literal notranslate"><span class="pre">workflows.classes.Workflow</span></code></p>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-plantit.job_manager.authentication">
<span id="plantit-job-manager-authentication-module"></span><h2>plantit.job_manager.authentication module<a class="headerlink" href="#module-plantit.job_manager.authentication" title="Permalink to this headline">¶</a></h2>
<p>Custom authentication used by the Clusterside part of Plant IT to
authenticate back to the Plant IT web server to get data or report on
the workflow run state.</p>
<dl class="class">
<dt id="plantit.job_manager.authentication.JobTokenAuthentication">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.authentication.</code><code class="sig-name descname">JobTokenAuthentication</code><a class="reference internal" href="_modules/plantit/job_manager/authentication.html#JobTokenAuthentication"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.authentication.JobTokenAuthentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">rest_framework.authentication.TokenAuthentication</span></code></p>
<p>Extends the token system provided by the django rest framework to
authenicate against tokens saved in a <code class="xref py py-class docutils literal notranslate"><span class="pre">job.Job</span></code>
(<code class="xref py py-attr docutils literal notranslate"><span class="pre">job.Job.auth_token</span></code>). This allows tokens
to be issued per job instead of per user.</p>
<p>Clients should authenticate by passing the token key in the “Authorization”
HTTP header, prepended with the string “Token “.</p>
<p class="rubric">Example</p>
<p>Authorization: Token 401f7ac837da42b97f613d789819ff93537bee6a</p>
</dd></dl>

</div>
<div class="section" id="module-plantit.job_manager.job">
<span id="plantit-job-manager-job-module"></span><h2>plantit.job_manager.job module<a class="headerlink" href="#module-plantit.job_manager.job" title="Permalink to this headline">¶</a></h2>
<p>The main job manager framework.</p>
<dl class="class">
<dt id="plantit.job_manager.job.DummyTask">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.job.</code><code class="sig-name descname">DummyTask</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#DummyTask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.DummyTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#plantit.job_manager.job.Task" title="plantit.job_manager.job.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.Task</span></code></a></p>
<p>A task that does nothing except keep track of it’s run state.</p>
<dl class="attribute">
<dt id="plantit.job_manager.job.DummyTask.ran">
<code class="sig-name descname">ran</code><a class="headerlink" href="#plantit.job_manager.job.DummyTask.ran" title="Permalink to this definition">¶</a></dt>
<dd><p>set to true when <a class="reference internal" href="#plantit.job_manager.job.DummyTask.run" title="plantit.job_manager.job.DummyTask.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> is called</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.DummyTask.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.job.DummyTask.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.DoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.DummyTask.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.job.DummyTask.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.MultipleObjectsReturned</span></code></p>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.DummyTask.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#DummyTask.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.DummyTask.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Command called to run the task</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.job.Job">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.job.</code><code class="sig-name descname">Job</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.base.Model</span></code></p>
<p>The Job class contains all information required to run the workflow
computations on a <code class="xref py py-class docutils literal notranslate"><span class="pre">remote.Cluster</span></code>.</p>
<p>A job consists of one or more job_manager.models.Task. Tasks are run
serially, in asending order, according to their Task.order_pos number.
The tasks are run server side, but asynchronously via a celery worker.</p>
<p>Jobs should be cluster agnostic.</p>
<dl class="attribute">
<dt id="plantit.job_manager.job.Job.date_created">
<code class="sig-name descname">date_created</code><a class="headerlink" href="#plantit.job_manager.job.Job.date_created" title="Permalink to this definition">¶</a></dt>
<dd><p>Date the job was
created, defaults to <code class="xref py py-meth docutils literal notranslate"><span class="pre">timezone.now()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>DateTime</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Job.auth_token">
<code class="sig-name descname">auth_token</code><a class="headerlink" href="#plantit.job_manager.job.Job.auth_token" title="Permalink to this definition">¶</a></dt>
<dd><p>A authentication token used by
<code class="xref py py-class docutils literal notranslate"><span class="pre">job_manager.authentication.JobTokenAuthentication</span></code> to authenticate
REST API connections (autogenerated by default)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Job.user">
<code class="sig-name descname">user</code><a class="headerlink" href="#plantit.job_manager.job.Job.user" title="Permalink to this definition">¶</a></dt>
<dd><p>user that created the job</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Job.submission_id">
<code class="sig-name descname">submission_id</code><a class="headerlink" href="#plantit.job_manager.job.Job.submission_id" title="Permalink to this definition">¶</a></dt>
<dd><p>UID of the cluster job that is performing the job actions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Job.work_dir">
<code class="sig-name descname">work_dir</code><a class="headerlink" href="#plantit.job_manager.job.Job.work_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>the directory on the cluster to perform the task in.
This path is relative to the clusters work_dir path.
(autogenerated based on the time/date by default)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.Job.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.job.Job.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.ObjectDoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.Job.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.job.Job.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.MultipleObjectsReturned</span></code></p>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Job.cancel">
<em class="property">static </em><code class="sig-name descname">cancel</code><span class="sig-paren">(</span><em class="sig-param">pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Job.cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Job.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel job async</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pk</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the job pk number</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">Celery</span></code> worker object</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Job.current_status">
<code class="sig-name descname">current_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Job.current_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Job.current_status" title="Permalink to this definition">¶</a></dt>
<dd><p>The job’s most recent status.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the most recent status of the job as a <a class="reference internal" href="#plantit.job_manager.job.Status" title="plantit.job_manager.job.Status"><code class="xref py py-class docutils literal notranslate"><span class="pre">Status</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Job.generate_token">
<code class="sig-name descname">generate_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Job.generate_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Job.generate_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a valid auth_token</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a binary ascii token compatible with
<a class="reference internal" href="#plantit.job_manager.authentication.JobTokenAuthentication" title="plantit.job_manager.authentication.JobTokenAuthentication"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobTokenAuthentication</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Job.generate_work_dir">
<code class="sig-name descname">generate_work_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Job.generate_work_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Job.generate_work_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a string to use as the the working directory for a job</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>timezone.now().strftime(‘%s’) + “/” as the directory string</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Job.run_next">
<em class="property">static </em><code class="sig-name descname">run_next</code><span class="sig-paren">(</span><em class="sig-param">pk</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Job.run_next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Job.run_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit job async</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pk</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the job pk number</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">Celery</span></code> worker object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.job.Status">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.job.</code><code class="sig-name descname">Status</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Status" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.base.Model</span></code></p>
<p>Job status object.</p>
<p><strong>Possible Status States:</strong></p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Status.COMPLETED</span></code> (int): Job is completed</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Status.FAILED</span></code> (int): Job failed</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Status.OK</span></code> (int): Status update, everything is OK</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Status.WARN</span></code> (int): Status update, warning: recoverable error</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Status.CREATED</span></code> (int): Job was crated but not yet started</p></li>
</ul>
<dl class="attribute">
<dt id="plantit.job_manager.job.Status.job">
<code class="sig-name descname">job</code><a class="headerlink" href="#plantit.job_manager.job.Status.job" title="Permalink to this definition">¶</a></dt>
<dd><p>The job that this status is liked to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ForeinKey</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Status.state">
<code class="sig-name descname">state</code><a class="headerlink" href="#plantit.job_manager.job.Status.state" title="Permalink to this definition">¶</a></dt>
<dd><p>The state of this status. Must be one of
the “Possible Status States” listed above.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Status.date">
<code class="sig-name descname">date</code><a class="headerlink" href="#plantit.job_manager.job.Status.date" title="Permalink to this definition">¶</a></dt>
<dd><p>The time the status was added to the job</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>DateTime</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Status.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#plantit.job_manager.job.Status.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A string description of why this status
was added to the job</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.Status.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.job.Status.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.ObjectDoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.Status.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.job.Status.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.MultipleObjectsReturned</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.job.Task">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.job.</code><code class="sig-name descname">Task</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.base.Model</span></code></p>
<p>A task that can be run by a Job</p>
<p>Once a job is started by calling <a class="reference internal" href="#plantit.job_manager.job.Job.run_next" title="plantit.job_manager.job.Job.run_next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Job.run_next()</span></code></a>, the first task
is automatically run, every task after the first will wait until
the previous task’s <a class="reference internal" href="#plantit.job_manager.job.Task.finish" title="plantit.job_manager.job.Task.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finish()</span></code></a> method is called.</p>
<p>New tasks can be created by extending this class. A task begins
when it’s <a class="reference internal" href="#plantit.job_manager.job.Task.run" title="plantit.job_manager.job.Task.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a>  method is called and finished when it’s
<a class="reference internal" href="#plantit.job_manager.job.Task.finish" title="plantit.job_manager.job.Task.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finish()</span></code></a> method is called. <a class="reference internal" href="#plantit.job_manager.job.Task.run" title="plantit.job_manager.job.Task.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> is typically
called automatically by the Job the task is part of. <a class="reference internal" href="#plantit.job_manager.job.Task.finish" title="plantit.job_manager.job.Task.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finish()</span></code></a>
must either be called at the end of <a class="reference internal" href="#plantit.job_manager.job.Task.run" title="plantit.job_manager.job.Task.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> if the task is
finished when <a class="reference internal" href="#plantit.job_manager.job.Task.run" title="plantit.job_manager.job.Task.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> is done, or by another method
if the task must wait for asynchronous processes to finish before it
is finished (e.g. wait for a job to run on an external cluster)</p>
<p class="rubric">Example</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">from job_manager.job.DummyTask</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&quot;</span>
        <span class="n">A</span> <span class="n">task</span> <span class="n">that</span> <span class="n">just</span> <span class="n">marks</span> <span class="n">it</span> <span class="n">run</span> <span class="n">state</span> <span class="k">as</span> <span class="n">run</span><span class="o">.</span>
    <span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ran</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<dl class="attribute">
<dt id="plantit.job_manager.job.Task.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#plantit.job_manager.job.Task.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the task</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Task.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#plantit.job_manager.job.Task.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Information and note related to this task</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Task.job">
<code class="sig-name descname">job</code><a class="headerlink" href="#plantit.job_manager.job.Task.job" title="Permalink to this definition">¶</a></dt>
<dd><p>The job containing this task</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ForeignKey</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Task.order_pos">
<code class="sig-name descname">order_pos</code><a class="headerlink" href="#plantit.job_manager.job.Task.order_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>The position within the job task queue.
Tasks are executed sequentially according to their
order_pos. Behavior for multiple tasks with the same order_pos
is undefined.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Task.complete">
<code class="sig-name descname">complete</code><a class="headerlink" href="#plantit.job_manager.job.Task.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>The is completed</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.job.Task.last_updated">
<code class="sig-name descname">last_updated</code><a class="headerlink" href="#plantit.job_manager.job.Task.last_updated" title="Permalink to this definition">¶</a></dt>
<dd><p>last time the task was updated, typically,
changed when the task is created or marked as complete.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>DateTime</p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.Task.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.job.Task.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.ObjectDoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.job.Task.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.job.Task.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.MultipleObjectsReturned</span></code></p>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Task.finish">
<code class="sig-name descname">finish</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Task.finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Task.finish" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Mark this task complete and initiate the next task in the</dt><dd><p>task queue for the job</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.job.Task.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/job.html#Task.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.job.Task.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Command called to run the task</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-plantit.job_manager.remote">
<span id="plantit-job-manager-remote-module"></span><h2>plantit.job_manager.remote module<a class="headerlink" href="#module-plantit.job_manager.remote" title="Permalink to this headline">¶</a></h2>
<p>Classes for working with remove servers.</p>
<dl class="class">
<dt id="plantit.job_manager.remote.Cluster">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.remote.</code><code class="sig-name descname">Cluster</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#Cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.Cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.base.Model</span></code></p>
<p>Contains information needed to login in to the cluster and submit
or cancel jobs. Clusters must support ssh via password authentication
or support ssh key authentication.</p>
<p><strong>Key Authentication</strong></p>
<p>If <a class="reference internal" href="#plantit.job_manager.remote.Cluster.password" title="plantit.job_manager.remote.Cluster.password"><code class="xref py py-attr docutils literal notranslate"><span class="pre">password</span></code></a> is left blank, ssh will be attempted
using ssh keys. The private key must be placed in
&lt;repository_root&gt;/config/ssh/id_rsa and the server must be included
in the known hosts file at &lt;repository_root&gt;/config/ssh/known_hosts.</p>
<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the cluster (max_length=20)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A short description providing notes and information related to
this cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.workdir">
<code class="sig-name descname">workdir</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory on the cluster in which tasks are run</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.username">
<code class="sig-name descname">username</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.username" title="Permalink to this definition">¶</a></dt>
<dd><p>username used to log into the cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.password">
<code class="sig-name descname">password</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.password" title="Permalink to this definition">¶</a></dt>
<dd><p>password used to log into the cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.port">
<code class="sig-name descname">port</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.port" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster ssh server ssh port (default=22)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.hostname">
<code class="sig-name descname">hostname</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster hostname</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.submit_commands">
<code class="sig-name descname">submit_commands</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.submit_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>The command(s) to be run via an ssh terminal
submit_commands has access to variables set by either some tasks
or jobs. When available, they are automatically instered in place
of the following text (default=’clusterside submit’)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.cancel_commands">
<code class="sig-name descname">cancel_commands</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.cancel_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>The coammnds(s) to be executed to cancel
a job on the cluster. (default=’# clusterside cancel #&lt;- cancel
commands are not implemented by clusterside.’)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.Cluster.Note">
<code class="sig-name descname">Note</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.Note" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel commands are not currently implemented by clusterside.</p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.Cluster.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.ObjectDoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.Cluster.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.remote.Cluster.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.MultipleObjectsReturned</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.remote.File">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.remote.</code><code class="sig-name descname">File</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#File"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.base.Model</span></code></p>
<p>Files that are copied to the cluster server to run a SubmissionTask</p>
<dl class="attribute">
<dt id="plantit.job_manager.remote.File.content">
<code class="sig-name descname">content</code><a class="headerlink" href="#plantit.job_manager.remote.File.content" title="Permalink to this definition">¶</a></dt>
<dd><p>The file</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#plantit.job_manager.remote.File" title="plantit.job_manager.remote.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.File.file_name">
<code class="sig-name descname">file_name</code><a class="headerlink" href="#plantit.job_manager.remote.File.file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the file</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.File.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.remote.File.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.ObjectDoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.File.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.remote.File.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.exceptions.MultipleObjectsReturned</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.remote.SSHTaskMixin">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.remote.</code><code class="sig-name descname">SSHTaskMixin</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#SSHTaskMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.SSHTaskMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.base.Model</span></code></p>
<p>Implements a run() method for <code class="xref py py-class docutils literal notranslate"><span class="pre">job_manager.job.Task</span></code>
that opens an ssh connection client and sftp to the job’s cluster when
the task is run, then calls self.ssh(). Also handles closing the ssh
connections after self.ssh() returns or if ssh() throws an exception.</p>
<p>Classes extending this mixin must also extend <code class="xref py py-class docutils literal notranslate"><span class="pre">job_manager.models.Task</span></code>
and should implement the ssh(self,client) method and perform task
functions within instead of in run().</p>
<p>SSHTaskMixin handles silently IOError and AuthenticationException
Exceptions (including ones raised by the ssh() method) by marking the
job failed. Any other exceptions raised by ssh() will cause the job
status to be set to failed and the exception re-raised.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SSHTaskMixin must be extended before Task:</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeTask</span><span class="p">(</span><span class="n">SSHTaskMixin</span><span class="p">,</span><span class="n">Task</span><span class="p">):</span> <span class="c1">#&lt;- This is correct</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">SomeTask</span><span class="p">(</span><span class="n">Task</span><span class="p">,</span><span class="n">SSHTaskMixin</span><span class="p">):</span> <span class="c1">#&lt;- Task&#39;s run() will run instead</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeTask</span><span class="p">(</span><span class="n">SSHTaskMixin</span><span class="p">,</span><span class="n">Task</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">ssh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Access self.client for running</span>
        <span class="c1"># ssh bash commands</span>
        <span class="c1"># or self.sftp for sending/gettings</span>
        <span class="c1"># files via sftp.</span>
        <span class="c1"># the workdirectory of the job can be</span>
        <span class="c1"># found in</span>
        <span class="c1"># self.workdir.</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#plantit.job_manager.remote.SubmissionTask" title="plantit.job_manager.remote.SubmissionTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubmissionTask</span></code></a> for a full example of using this mixin.</p>
<dl class="attribute">
<dt id="plantit.job_manager.remote.SSHTaskMixin.cluster">
<code class="sig-name descname">cluster</code><a class="headerlink" href="#plantit.job_manager.remote.SSHTaskMixin.cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>ForeinKey to Cluster,
The cluster used to run the task</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ForeignKey</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.SSHTaskMixin.client">
<code class="sig-name descname">client</code><a class="headerlink" href="#plantit.job_manager.remote.SSHTaskMixin.client" title="Permalink to this definition">¶</a></dt>
<dd><p>ssh connection to the cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">paramako.SSHClient</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.SSHTaskMixin.sftp">
<code class="sig-name descname">sftp</code><a class="headerlink" href="#plantit.job_manager.remote.SSHTaskMixin.sftp" title="Permalink to this definition">¶</a></dt>
<dd><p>sftp connection to the
cluster. The connection is chdir’d into self.workdir</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">paramiko.sft_client.SFTPClient</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.SSHTaskMixin.workdir">
<code class="sig-name descname">workdir</code><a class="headerlink" href="#plantit.job_manager.remote.SSHTaskMixin.workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>full path of the job’s working directory on the cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.remote.SubmissionTask">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.remote.</code><code class="sig-name descname">SubmissionTask</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#SubmissionTask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#plantit.job_manager.remote.SSHTaskMixin" title="plantit.job_manager.remote.SSHTaskMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.remote.SSHTaskMixin</span></code></a>, <a class="reference internal" href="#plantit.job_manager.job.Task" title="plantit.job_manager.job.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.Task</span></code></a></p>
<p>A job task for submitting jobs to a Cluster.</p>
<p>The submission task sshes into the cluster, copies its submission script
and files into the Job’s working directory, the executes the cluster’s
<code class="xref py py-attr docutils literal notranslate"><span class="pre">job_manager.remote.Cluster.submit_commands</span></code>.</p>
<p>Submission tasks should be cluster agnostic. The cluster object
should address any commands that are cluster specific.</p>
<dl class="attribute">
<dt id="plantit.job_manager.remote.SubmissionTask.parameters">
<code class="sig-name descname">parameters</code><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask.parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>The workflow user
parameters as set by the user during submission.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str containing a JSON object</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.SubmissionTask.app_name">
<code class="sig-name descname">app_name</code><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask.app_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The app_name of the workflow to run (Required)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.SubmissionTask.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.DoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.SubmissionTask.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.MultipleObjectsReturned</span></code></p>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.remote.SubmissionTask.get_params">
<code class="sig-name descname">get_params</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#SubmissionTask.get_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask.get_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines workflow and server set parameters into a JSON
object to be saved provided as the workflow.json file
to ClusterSide.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON Object containing workflow parameters for this job.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="plantit.job_manager.remote.SubmissionTask.ssh">
<code class="sig-name descname">ssh</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#SubmissionTask.ssh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.SubmissionTask.ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies script files, and executes the
submission script</p>
<dl class="simple">
<dt>Exceptions:</dt><dd><p>IOError: thrown during copying of files</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.remote.UploadCollectionTask">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.remote.</code><code class="sig-name descname">UploadCollectionTask</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#UploadCollectionTask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.UploadCollectionTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#plantit.job_manager.remote.SSHTaskMixin" title="plantit.job_manager.remote.SSHTaskMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.remote.SSHTaskMixin</span></code></a>, <a class="reference internal" href="#plantit.job_manager.job.Task" title="plantit.job_manager.job.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.Task</span></code></a></p>
<p>Uploads all the files in a collection to the server to the files folder
in the job wok directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This was, and could be, used in conjunction with a
<a class="reference internal" href="plantit.file_manager.filesystems.html#plantit.file_manager.filesystems.local.Local" title="plantit.file_manager.filesystems.local.Local"><code class="xref py py-class docutils literal notranslate"><span class="pre">Local</span></code></a> file system
to copy <a class="reference internal" href="plantit.collection.html#plantit.collection.models.Sample" title="plantit.collection.models.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> files saved
locally on the server to the cluster for analysis.</p>
<p>In the current build of Plant IT, such local file systems are not
supported.</p>
</div>
<dl class="exception">
<dt id="plantit.job_manager.remote.UploadCollectionTask.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.remote.UploadCollectionTask.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.DoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.UploadCollectionTask.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.remote.UploadCollectionTask.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.MultipleObjectsReturned</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="plantit.job_manager.remote.UploadFileTask">
<em class="property">class </em><code class="sig-prename descclassname">plantit.job_manager.remote.</code><code class="sig-name descname">UploadFileTask</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/plantit/job_manager/remote.html#UploadFileTask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plantit.job_manager.remote.UploadFileTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#plantit.job_manager.remote.SSHTaskMixin" title="plantit.job_manager.remote.SSHTaskMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.remote.SSHTaskMixin</span></code></a>, <a class="reference internal" href="#plantit.job_manager.job.Task" title="plantit.job_manager.job.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.Task</span></code></a></p>
<p>Uploads a list of files to the job work directory on the server.</p>
<dl class="attribute">
<dt id="plantit.job_manager.remote.UploadFileTask.fields">
<code class="sig-name descname">fields</code><a class="headerlink" href="#plantit.job_manager.remote.UploadFileTask.fields" title="Permalink to this definition">¶</a></dt>
<dd><p>comma-seperated list of paths of files to uplaod,
paths must be relative to webserver root</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="plantit.job_manager.remote.UploadFileTask.delete">
<code class="sig-name descname">delete</code><a class="headerlink" href="#plantit.job_manager.remote.UploadFileTask.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>delete local file after upload</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.UploadFileTask.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#plantit.job_manager.remote.UploadFileTask.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.DoesNotExist</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="plantit.job_manager.remote.UploadFileTask.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#plantit.job_manager.remote.UploadFileTask.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">plantit.job_manager.job.MultipleObjectsReturned</span></code></p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plantit.user.html" class="btn btn-neutral float-right" title="plantit.user package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plantit.file_manager.filesystems.html" class="btn btn-neutral float-left" title="plantit.file_manager.filesystems package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, CPS Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>